<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Trainer - Wiki Compl√®te | Documentation Syst√®me IoT</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #2ecc71;
            --secondary: #3498db;
            --danger: #e74c3c;
            --warning: #f39c12;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --text: #34495e;
        }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8f9fa; color: var(--text); line-height: 1.6; }
        header { background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white; padding: 1.5rem 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
        .header-content { max-width: 1400px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; }
        .logo { font-size: 1.8rem; font-weight: bold; color: white; }
        .page-tabs { display: flex; gap: 1rem; }
        .page-tab { padding: 0.5rem 1rem; background: rgba(255,255,255,0.2); color: white; border: none; border-radius: 5px; cursor: pointer; transition: all 0.3s; }
        .page-tab:hover { background: rgba(255,255,255,0.3); }
        .page-tab.active { background: white; color: var(--primary); }
        .container { max-width: 1400px; margin: 0 auto; padding: 2rem 20px; }
        .intro-section { background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 15px rgba(0,0,0,0.08); margin-bottom: 2rem; }
        .intro-section h1 { color: var(--primary); margin-bottom: 1rem; font-size: 2.2rem; }
        .intro-section p { font-size: 1rem; margin-bottom: 1rem; color: #555; }
        .intro-image { width: 100%; height: 250px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.1rem; margin: 1.5rem 0; }
        .main-content { display: grid; grid-template-columns: 250px 1fr; gap: 2rem; }
        .sidebar { background: white; padding: 1.5rem; border-radius: 10px; height: fit-content; box-shadow: 0 2px 10px rgba(0,0,0,0.08); position: sticky; top: 100px; }
        .sidebar h3 { color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem; }
        .sidebar ul { list-style: none; }
        .sidebar li { margin-bottom: 0.3rem; }
        .sidebar a { color: var(--text); text-decoration: none; padding: 0.4rem 0.5rem; border-left: 3px solid transparent; display: block; transition: all 0.3s; font-size: 0.9rem; }
        .sidebar a:hover { background-color: var(--light); border-left-color: var(--primary); padding-left: 1rem; }
        .page { display: none; }
        .page.active { display: block; }
        .content { background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
        section { margin-bottom: 3rem; scroll-margin-top: 120px; }
        section h2 { color: var(--primary); font-size: 1.8rem; margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 3px solid var(--primary); }
        section h3 { color: var(--secondary); font-size: 1.3rem; margin-top: 1.5rem; margin-bottom: 1rem; }
        section h4 { color: var(--text); font-size: 1.1rem; margin-top: 1rem; margin-bottom: 0.5rem; font-weight: 600; }
        p, li { margin-bottom: 0.8rem; font-size: 0.95rem; }
        ul, ol { margin-left: 1.5rem; }
        table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
        thead { background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white; }
        th, td { padding: 0.8rem; text-align: left; border-bottom: 1px solid #ddd; font-size: 0.9rem; }
        tbody tr:hover { background-color: #f5f5f5; }
        .cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin: 1.5rem 0; }
        .card { background: white; border: 2px solid #ddd; border-radius: 10px; padding: 1.5rem; transition: all 0.3s; }
        .card:hover { border-color: var(--primary); box-shadow: 0 5px 20px rgba(46, 204, 113, 0.2); transform: translateY(-5px); }
        .card h4 { color: var(--primary); margin-bottom: 0.5rem; font-size: 1rem; }
        .card p { font-size: 0.9rem; margin-bottom: 0.5rem; }
        pre { background: #2c3e50; color: #ecf0f1; padding: 1.5rem; border-radius: 8px; overflow-x: auto; margin: 1rem 0; border-left: 4px solid var(--primary); font-size: 0.85rem; }
        code { font-family: 'Courier New', monospace; }
        .alert { padding: 1rem; border-radius: 5px; margin: 1rem 0; border-left: 4px solid; font-size: 0.95rem; }
        .alert-info { background-color: #d1ecf1; border-color: #0c5460; color: #0c5460; }
        .alert-warning { background-color: #fff3cd; border-color: #856404; color: #856404; }
        .alert-danger { background-color: #f8d7da; border-color: #721c24; color: #721c24; }
        .alert-success { background-color: #d4edda; border-color: #155724; color: #155724; }
        .schema-box { background: #f8f9fa; border: 2px solid var(--primary); border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; font-family: monospace; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word; font-size: 0.85rem; }
        .spec-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1rem; margin: 1rem 0; }
        .spec-item { background: var(--light); padding: 1rem; border-radius: 5px; border-left: 4px solid var(--primary); font-size: 0.9rem; }
        .spec-item strong { color: var(--primary); }
        .box-highlight { background: linear-gradient(135deg, rgba(46, 204, 113, 0.1) 0%, rgba(52, 152, 219, 0.1) 100%); border: 2px solid var(--primary); border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; }
        .timeline { position: relative; padding: 2rem 0; }
        .timeline-item { padding-left: 3rem; position: relative; margin-bottom: 2rem; }
        .timeline-item::before { content: ''; position: absolute; left: 0; top: 0; width: 20px; height: 20px; background: var(--primary); border-radius: 50%; border: 3px solid white; box-shadow: 0 0 0 3px var(--primary); }
        .timeline-item::after { content: ''; position: absolute; left: 8px; top: 20px; width: 2px; height: calc(100% + 20px); background: var(--primary); }
        .timeline-item:last-child::after { display: none; }
        footer { background: var(--dark); color: white; text-align: center; padding: 2rem; margin-top: 3rem; }
        footer a { color: var(--primary); text-decoration: none; }
        @media (max-width: 968px) { .main-content { grid-template-columns: 1fr; } .sidebar { position: static; } }
        @media (max-width: 768px) { .header-content { justify-content: center; } section h2 { font-size: 1.5rem; } .cards-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">üö¥ Home Trainer - Wiki Compl√®te</div>
            <div class="page-tabs">
                <button class="page-tab active" onclick="switchPage('page1')">üìã Projets & Technique</button>
                <button class="page-tab" onclick="switchPage('page2')">üîó Int√©gration & Am√©lioration</button>
            </div>
        </div>
    </header>

    <!-- PAGE 1: PROJETS & TECHNIQUE -->
    <div id="page1" class="page active">
        <div class="container">
            <section class="intro-section">
                <h1>üéØ Home Trainer - Syst√®me de Monitoring Sant√© Connect√©</h1>
                <p><strong>Solution de r√©√©ducation bas√©e sur un v√©lo home trainer connect√©</strong></p>
                <p>Ce projet consiste √† d√©velopper un syst√®me complet de surveillance de la sant√© et du stress int√©gr√© √† un v√©lo home trainer. Il collecte des donn√©es physiologiques (fr√©quence cardiaque, saturation en oxyg√®ne, stress) et environnementales.</p>
                <p>Le syst√®me s'appuie sur plusieurs capteurs reli√©s √† un <strong>Arduino UNO R4 WiFi</strong>, qui traite les donn√©es et les transmet en temps r√©el via <strong>MQTT</strong> vers des dashboards <strong>Node-RED</strong> interactifs.</p>

                <img src="./assets/circuit_image1.png" style="width: 100%;
    max-width: 900px;
    display: block;
    margin: 1.5rem auto;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.15);"/>
                <img src="./assets/circuit_image2.png" style="width: 100%;
    max-width: 900px;
    display: block;
    margin: 1.5rem auto;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.15);" />

            </section>

            <div class="main-content">
                <aside class="sidebar">
                    <h3>üìë Navigation</h3>
                    <ul>
                        <li><a href="#description">Description Projets</a></li>
                        <li><a href="#projet1">Projet 1 - Stress</a></li>
                        <li><a href="#projet2">Projet 2 - Sant√©</a></li>
                        <li><a href="#requirements">Pr√©requis</a></li>
                        <li><a href="#components">Composants</a></li>
                        <li><a href="#wiring">C√¢blage</a></li>
                        <li><a href="#code">Code Arduino</a></li>
                        <li><a href="#nodered">Node-RED</a></li>
                        <li><a href="#mqtt">MQTT</a></li>
                        <li><a href="#troubleshooting">Troubleshooting</a></li>
                    </ul>
                </aside>

                <div class="content">
                    <section id="description">
                        <h2>üìã Description des deux projets</h2>
                        <p>Dans le cadre du projet Home Trainer, <strong>deux sous-projets compl√©mentaires</strong> ont √©t√© d√©velopp√©s. Chacun repose sur un Arduino UNO R4 WiFi, un ensemble de capteurs sp√©cifiques et un dashboard Node-RED d√©di√©.</p>
                       
                        <h3>Approche modulaire</h3>
                        <p>Cette approche facilite :</p>
                        <ul>
                            <li>La compr√©hension du syst√®me</li>
                            <li>Son √©volution future</li>
                            <li>Son int√©gration dans l'√©cosyst√®me Home Trainer</li>
                        </ul>

                        <div class="cards-grid">
                            <div class="card">
                                <h4>üìà Projet 1 - Stress & Environnement</h4>
                                <p><strong>Capteurs :</strong> GSR, CCS811, MPU6050</p>
                                <p><strong>Focus :</strong> Analyse du stress et conditions environnementales</p>
                                <p><strong>Dashboard :</strong> Visualisation compl√®te avec alertes</p>
                            </div>
                            <div class="card">
                                <h4>‚ù§Ô∏è Projet 2 - Sant√© Physiologique</h4>
                                <p><strong>Capteurs :</strong> SpO‚ÇÇ/BPM, PIR, Temp√©rature</p>
                                <p><strong>Focus :</strong> Suivi de l'√©tat de sant√© pendant l'effort</p>
                                <p><strong>Dashboard :</strong> Monitoring m√©dical simplifi√©</p>
                            </div>
                        </div>
                    </section>

                    <section id="projet1">
                        <h2>üìà Projet 1 - Surveillance du Stress & Environnement</h2>
                        <h3>Objectifs</h3>
                        <p>Analyser le niveau de stress de l'utilisateur ainsi que les conditions environnementales pendant l'entra√Ænement ou la r√©√©ducation. Ces param√®tres influencent directement le confort, la s√©curit√© et la qualit√© de l'effort.</p>

                        <h3>Capteurs et donn√©es analys√©es</h3>
                        <div class="spec-list">
                            <div class="spec-item">
                                <strong>üñêÔ∏è Capteur GSR</strong><br>
                                Estimation du stress via r√©ponse galvanique de la peau
                            </div>
                            <div class="spec-item">
                                <strong>üí® Qualit√© de l'air (CCS811)</strong><br>
                                Mesure CO‚ÇÇ (ppm) et TVOC (ppb)
                            </div>
                            <div class="spec-item">
                                <strong>üìä Mouvement (MPU6050)</strong><br>
                                D√©tection des mouvements et agitation
                            </div>
                        </div>

                        <h3>Zones de stress</h3>
                        <div class="cards-grid">
                            <div class="card">
                                <h4>üü¢ Zone Verte</h4>
                                <p><strong>√âtat :</strong> Calme</p>
                                <p><strong>Crit√®res :</strong> GSR ‚â§ 450</p>
                                <p><strong>Retours :</strong> LED verte, sons calmes</p>
                            </div>
                            <div class="card">
                                <h4>üü° Zone Jaune</h4>
                                <p><strong>√âtat :</strong> Stress mod√©r√©</p>
                                <p><strong>Crit√®res :</strong> GSR 450-650</p>
                                <p><strong>Retours :</strong> LED jaune, sons d'alerte</p>
                            </div>
                            <div class="card">
                                <h4>üî¥ Zone Rouge</h4>
                                <p><strong>√âtat :</strong> Danger potentiel</p>
                                <p><strong>Crit√®res :</strong> GSR > 650</p>
                                <p><strong>Retours :</strong> LED rouge, alarme persistante</p>
                            </div>
                        </div>

                        <h3>üìä Dashboard 1 - Stress et Environnement</h3>
                        <p>Visualisation claire et intuitive des donn√©es :</p>
                        <ul>
                            <li>Jauge et graphique temporel du GSR</li>
                            <li>Indicateurs CO‚ÇÇ et TVOC avec seuils</li>
                            <li>Graphique de mouvement</li>
                            <li>Indicateur de zone (SAFE / MEDIUM / DANGER)</li>
                            <li>Profil utilisateur et actions rapides</li>
                        </ul>
                    </section>

                    <section id="projet2">
                        <h2>‚ù§Ô∏è Projet 2 - Suivi de la Sant√© Physiologique</h2>
                        <h3>Objectifs</h3>
                        <p>D√©di√© au suivi de l'√©tat de sant√© pendant l'effort ou la r√©√©ducation. Permet de surveiller des param√®tres physiologiques essentiels pour garantir une pratique s√©curis√©e.</p>

                        <h3>Capteurs et donn√©es analys√©es</h3>
                        <div class="spec-list">
                            <div class="spec-item">
                                <strong>‚ù§Ô∏è SpO‚ÇÇ et Fr√©quence Cardiaque</strong><br>
                                Saturation en oxyg√®ne et rythme cardiaque
                            </div>
                            <div class="spec-item">
                                <strong>üå°Ô∏è Temp√©rature</strong><br>
                                Estimation de la temp√©rature corporelle
                            </div>
                            <div class="spec-item">
                                <strong>üö∂ Capteur PIR</strong><br>
                                D√©tection de pr√©sence et mouvement
                            </div>
                        </div>

                        <h3>√âtats g√©n√©raux</h3>
                        <div class="cards-grid">
                            <div class="card">
                                <h4>üü¢ Normal</h4>
                                <p>Valeurs physiologiques dans les normes</p>
                            </div>
                            <div class="card">
                                <h4>üü° Mouvement D√©tect√©</h4>
                                <p>Activit√© physique ou agitation d√©tect√©e</p>
                            </div>
                            <div class="card">
                                <h4>üî¥ Danger</h4>
                                <p>Valeurs hors seuils de s√©curit√©</p>
                            </div>
                        </div>

                        <h3>‚ù§Ô∏è Dashboard 2 - Sant√©</h3>
                        <p>Monitoring m√©dical simplifi√© en temps r√©el :</p>
                        <ul>
                            <li>Jauge SpO‚ÇÇ (%) avec seuils de s√©curit√©</li>
                            <li>Jauge du rythme cardiaque (BPM)</li>
                            <li>Jauge de temp√©rature corporelle</li>
                            <li>Indicateur de mouvement</li>
                            <li>√âtat g√©n√©ral synth√©tique</li>
                            <li>Visualisation du stress global</li>
                        </ul>
                    </section>

                    <section id="requirements">
                        <h2>‚úÖ Pr√©requis</h2>
                        <h3>Logiciels</h3>
                        <div class="spec-list">
                            <div class="spec-item">
                                <strong>PlatformIO</strong><br>
                                Environnement de d√©veloppement Arduino
                            </div>
                            <div class="spec-item">
                                <strong>Node-RED</strong><br>
                                Plateforme d'automatisation par flux
                            </div>
                            <div class="spec-item">
                                <strong>Broker MQTT</strong><br>
                                EMQX (broker.emqx.io:1883)
                            </div>
                        </div>
                        <h3>Librairies PlatformIO</h3>
                        <pre><code>lib_deps =
  knolleary/PubSubClient@^2.8
  adafruit/Adafruit CCS811 Library@1.1.0
  dfrobot/DFRobot_BloodOxygen_S@^1.0.0
  arduino-libraries/ArduinoMqttClient@^0.1.8</code></pre>
                    </section>

                    <section id="components">
                        <h2>üîß Composants n√©cessaires</h2>
                        <h3>Microcontr√¥leur</h3>
                        <table>
                            <thead><tr><th>R√©f√©rence</th><th>D√©signation</th><th>Quantit√©</th><th>R√¥le</th></tr></thead>
                            <tbody><tr><td><strong>Arduino UNO R4 WiFi</strong></td><td>Microcontr√¥leur ARM Cortex-M4</td><td>1</td><td>C≈ìur du syst√®me, WiFi int√©gr√©</td></tr></tbody>
                        </table>

                        <h3>Capteurs - Projet 1</h3>
                        <table>
                            <thead><tr><th>Capteur</th><th>Interface</th><th>Adresse</th><th>R√¥le</th></tr></thead>
                            <tbody>
                                <tr><td><strong>Grove GSR</strong></td><td>Analogique</td><td>A0</td><td>D√©tection stress</td></tr>
                                <tr><td><strong>Adafruit CCS811</strong></td><td>I2C</td><td>0x5A</td><td>CO‚ÇÇ & TVOC</td></tr>
                                <tr><td><strong>InvenSense MPU6050</strong></td><td>I2C</td><td>0x68</td><td>Mouvements</td></tr>
                            </tbody>
                        </table>

                        <h3>Capteurs - Projet 2</h3>
                        <table>
                            <thead><tr><th>Capteur</th><th>Interface</th><th>Adresse</th><th>R√¥le</th></tr></thead>
                            <tbody>
                                <tr><td><strong>DFRobot Blood Oxygen S</strong></td><td>I2C</td><td>0x57</td><td>SpO‚ÇÇ & BPM</td></tr>
                                <tr><td><strong>HC-SR501</strong></td><td>Digital</td><td>D2</td><td>Mouvement</td></tr>
                            </tbody>
                        </table>

                        <h3>Sorties & Actionneurs</h3>
                        <table>
                            <thead><tr><th>Composant</th><th>Quantit√©</th><th>Pin</th><th>R√¥le</th></tr></thead>
                            <tbody>
                                <tr><td>LED Verte</td><td>1</td><td>D3</td><td>√âtat normal</td></tr>
                                <tr><td>LED Jaune</td><td>1</td><td>D4</td><td>√âtat vigilance</td></tr>
                                <tr><td>LED Rouge</td><td>1</td><td>D5</td><td>√âtat danger</td></tr>
                                <tr><td>Buzzer 5V</td><td>1</td><td>D6</td><td>Alerte sonore</td></tr>
                            </tbody>
                        </table>

                        <h3>√âlectronique basique</h3>
                        <div class="spec-list">
                            <div class="spec-item"><strong>R√©sistances :</strong>220Œ© (3x)</div>
                            <div class="spec-item"><strong>Infrastructure :</strong> Breadboards, C√¢bles Dupont, USB-C</div>
                        </div>
                    </section>

                    <section id="wiring">
                        <h2>‚ö° Sch√©mas de c√¢blage</h2>
                        <h3>Pins Connections</h3>
                        <div class="schema-box">Arduino UNO R4 WiFi
‚îú‚îÄ‚îÄ A0 (GSR Sensor)
‚îú‚îÄ‚îÄ D2 (PIR Motion)
‚îú‚îÄ‚îÄ D3 (LED Green) + 220Œ© ‚Üí GND
‚îú‚îÄ‚îÄ D4 (LED Yellow) + 220Œ© ‚Üí GND
‚îú‚îÄ‚îÄ D5 (LED Red) + 220Œ© ‚Üí GND
‚îú‚îÄ‚îÄ D6 (Buzzer) ‚Üí GND
‚îú‚îÄ‚îÄ SDA (I2C) 
‚îî‚îÄ‚îÄ SCL (I2C) </div>

                        
                    </section>

                    <section id="code">
                        <h2>üíª Code Arduino - Projets 1 & 2</h2>
                       
                        <h3>üìà Projet 1 - Stress & Environnement</h3>
                       
                        <h4>Section 1 : Lecture GSR</h4>
                        <pre><code>int gsrValue = analogRead(GSR_PIN); // Pin A0
// Valeurs: 0-450 (calme) | 450-650 (vigilance) | 650-1023 (danger)</code></pre>

                        <h4>Section 2 : Machine d'√©tats</h4>
                        <pre><code>int determineZone(int gsrValue) {
  if (gsrValue <= 450) return 0;      // üü¢ Vert
  else if (gsrValue <= 650) return 1; // üü° Jaune
  else return 2;                       // üî¥ Rouge
}</code></pre>

                        <h4>Section 3 : Lecture capteurs I2C</h4>
                        <pre><code>// CCS811 - Qualit√© air
if (ccs.available() && !ccs.readData()) {
  co2 = ccs.geteCO2();
  tvoc = ccs.getTVOC();
}

// MPU6050 - Mouvement
float readMovement() {
  Wire.beginTransmission(MPU_ADDR);
  Wire.write(0x3B);
  Wire.endTransmission(false);
  Wire.requestFrom(MPU_ADDR, 6, true);
  return abs(ax) + abs(ay) + abs(az);
}</code></pre>

                        <h4>Section 4 : Communication MQTT</h4>
                        <pre><code>unsigned long lastMQTTSend = 0;
const unsigned long MQTT_INTERVAL = 1000;

void loop() {
  if (millis() - lastMQTTSend >= MQTT_INTERVAL) {
    lastMQTTSend = millis();
    sendMQTTData();
  }
}</code></pre>

                        <h4>Section 5 : Envoi JSON</h4>
                        <pre><code>String payload = "{";
payload += "\"gsr\":" + String(gsrValue);
payload += ",\"movement\":" + String(movement);
payload += ",\"co2\":" + String(co2);
payload += ",\"tvoc\":" + String(tvoc);
payload += ",\"zone\":" + String(zone);
payload += "}";

mqttClient.beginMessage(mqtt_topic);
mqttClient.print(payload);
mqttClient.endMessage();</code></pre>

                        <h3>‚ù§Ô∏è Projet 2 - Sant√© Physiologique</h3>

                        <h4>Section 1 : Lecture SpO‚ÇÇ & BPM</h4>
                        <pre><code>spo2.getHeartbeatSPO2();
int o2 = spo2._sHeartbeatSPO2.SPO2;        // Saturation oxyg√®ne (%)
int bpm = spo2._sHeartbeatSPO2.Heartbeat;  // Fr√©quence cardiaque</code></pre>

                        <h4>Section 2 : Lecture Temp√©rature</h4>
                        <pre><code>float temp = spo2.getTemperature_C();</code></pre>

                        <h4>Section 3 : D√©tection Mouvement (PIR)</h4>
                        <pre><code>int motion = digitalRead(PIR_PIN); // D2</code></pre>

                        <h4>Section 4 : Filtrage des valeurs aberrantes</h4>
                        <pre><code>// Rejette valeurs hors limites et utilise d√©faut
if (o2 < 70 || o2 > 100) o2 = 95;      // D√©faut: 95%
if (bpm < 30 || bpm > 200) bpm = 75;   // D√©faut: 75 bpm
if (temp < 20 || temp > 45) temp = 32.0;</code></pre>

                        <h4>Section 5 : Machine d'√©tats - Zones de sant√©</h4>
                        <pre><code>int zone = 0;

if (o2 < 92 || bpm > 150 || bpm < 40) {
  zone = 2; // üî¥ DANGER
}
else if (motion == HIGH) {
  zone = 1; // üü° VIGILANCE
}
// else zone = 0 (üü¢ NORMAL)</code></pre>

                        <h4>Section 6 : Envoi JSON Sant√©</h4>
                        <pre><code>String json = "{";
json += "\"motion\":" + String(motion);
json += ",\"spo2\":" + String(o2);
json += ",\"bpm\":" + String(bpm);
json += ",\"temp\":" + String(temp, 2);
json += ",\"zone\":" + String(zone);
json += "}";

client.publish(topic, json.c_str());</code></pre>
                    </section>

                    <section id="nodered">
                        <h2>üì± Node-RED Dashboards</h2>
                        <h3>Architecture Flux - Projet 1</h3>
                        <div class="schema-box">MQTT Input (homeTrainerCastres/Group2-B/MAC)
    ‚Üì
JSON Parser
    ‚îú‚Üí Extract GSR ‚Üí Gauge + Chart
    ‚îú‚Üí Extract Movement ‚Üí Chart
    ‚îú‚Üí Extract CO2 ‚Üí Gauge + Chart
    ‚îú‚Üí Extract TVOC ‚Üí Gauge
    ‚îî‚Üí Extract Zone ‚Üí LEDs + Alerts + Sound</div>

                        <h3>Architecture Flux - Projet 2</h3>
                        <div class="schema-box">MQTT Input (homeTrainerCastres/Group2-B/HEALTH2)
    ‚Üì
JSON Parser
    ‚îú‚Üí Extract Motion ‚Üí Detection Badge
    ‚îú‚Üí Extract SpO‚ÇÇ ‚Üí Gauge
    ‚îú‚Üí Extract BPM ‚Üí Gauge
    ‚îú‚Üí Extract Temp ‚Üí Gauge
    ‚îî‚Üí Extract Zone ‚Üí Status Badge</div>

                        <h3>üìä Dashboard 1 - √âl√©ments affich√©s</h3>
                        <div class="spec-list">
                            <div class="spec-item"><strong>üìä Jauge GSR</strong><br>0-1023 avec zones color√©es</div>
                            <div class="spec-item"><strong>üìà Graphiques</strong><br>Tendances GSR, CO‚ÇÇ, TVOC, Mouvement</div>
                            <div class="spec-item"><strong>üö® Alertes</strong><br>Zone DANGER + Sons + Pop-ups</div>
                            <div class="spec-item"><strong>üé® Th√®me</strong><br>Mode sombre/clair</div>
                        </div>

                        <h3>‚ù§Ô∏è Dashboard 2 - √âl√©ments affich√©s</h3>
                        <div class="spec-list">
                            <div class="spec-item"><strong>‚ù§Ô∏è Fr√©quence Cardiaque</strong><br>40-150 BPM</div>
                            <div class="spec-item"><strong>O‚ÇÇ Saturation</strong><br>85-100% SpO‚ÇÇ</div>
                            <div class="spec-item"><strong>üå°Ô∏è Temp√©rature</strong><br>20-45¬∞C</div>
                            <div class="spec-item"><strong>üö∂ Mouvement</strong><br>D√©tection PIR</div>
                        </div>
                    </section>

                    <section id="mqtt">
                        <h2>üì° Communication MQTT</h2>
                        <table>
                            <thead><tr><th>Topic</th><th>Fr√©quence</th><th>Donn√©es</th></tr></thead>
                            <tbody>
                                <tr><td><code>homeTrainerCastres/Group2-B/MAC</code></td><td>1x/s</td><td>GSR, CO2, TVOC, mouvement, zone</td></tr>
                                <tr><td><code>homeTrainerCastres/Group2-B/HEALTH2</code></td><td>1x/s</td><td>SpO‚ÇÇ, BPM, temp, motion, zone</td></tr>
                            </tbody>
                        </table>

                        <h3>Payloads JSON</h3>
                        <h4>Projet 1 (Stress)</h4>
                        <pre><code>{"gsr":520,"movement":2450,"co2":420,"tvoc":150,"zone":1}</code></pre>
                       
                        <h4>Projet 2 (Sant√©)</h4>
                        <pre><code>{"motion":0,"spo2":95,"bpm":72,"temp":37.1,"zone":0}</code></pre>

                        <h3>Signification des zones</h3>
                        <table>
                            <thead><tr><th>Zone</th><th>Crit√®res</th><th>Actions</th></tr></thead>
                            <tbody>
                                <tr><td><strong>üü¢ Zone 0</strong></td><td>GSR ‚â§ 450, SpO‚ÇÇ ‚â• 92%, 40‚â§BPM‚â§150</td><td>LED verte, sons calmes</td></tr>
                                <tr><td><strong>üü° Zone 1</strong></td><td>GSR 450-650, Mouvement</td><td>LED jaune, alertes</td></tr>
                                <tr><td><strong>üî¥ Zone 2</strong></td><td>GSR > 650, SpO‚ÇÇ < 92%, BPM anormal</td><td>LED rouge, alarme</td></tr>
                            </tbody>
                        </table>
                    </section>

                    <section id="troubleshooting">
                        <h2>üîß Troubleshooting</h2>
                        <div class="timeline">
                            <div class="timeline-item">
                                <h4>‚ùå Les donn√©es MQTT ne sont pas re√ßues</h4>
                                <ul>
                                    <li><strong>Cause :</strong> Arduino non connect√© WiFi ou mauvaise configuration</li>
                                    <li><strong>Solution :</strong> V√©rifier Serial Monitor (115200 baud)</li>
                                    <li><strong>Solution :</strong> V√©rifier SSID, password, adresse broker</li>
                                    <li><strong>Solution :</strong> V√©rifier port 1883 accessible</li>
                                </ul>
                            </div>

                            <div class="timeline-item">
                                <h4>‚ùå CCS811 ne s'initialise pas</h4>
                                <ul>
                                    <li><strong>Cause :</strong> Mauvais c√¢blage I2C</li>
                                    <li><strong>Solution :</strong> V√©rifier SDA (pin 20) et SCL (pin 21)</li>
                                    <li><strong>Solution :</strong> Attendre 15-20s apr√®s alimentation</li>
                                    <li><strong>Solution :</strong> Scanner I2C pour v√©rifier adresse 0x5A</li>
                                </ul>
                            </div>

                            <div class="timeline-item">
                                <h4>‚ùå SpO‚ÇÇ ou BPM aberrant</h4>
                                <ul>
                                    <li><strong>Cause :</strong> Mauvais positionnement ou mouvement</li>
                                    <li><strong>Solution :</strong> Bien presser capteur contre peau</li>
                                    <li><strong>Solution :</strong> √âviter mouvements brusques</li>
                                    <li><strong>Solution :</strong> Attendre 5-10s apr√®s activation</li>
                                </ul>
                            </div>
                        </div>

                        <div class="alert alert-info">
                            <strong>‚ÑπÔ∏è Remarque g√©n√©rale :</strong> Toujours v√©rifier Serial Monitor en priorit√©. Tester chaque capteur ind√©pendamment. V√©rifier les connexions avant de modifier le code.
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <!-- PAGE 2: INT√âGRATION & AM√âLIORATION -->
    <div id="page2" class="page">
        <div class="container">
            <section class="intro-section">
                <h1>üîó Int√©gration dans Home Trainer & Am√©liorations Futures</h1>
                <p>Comment ce syst√®me s'int√®gre dans le projet global, les adaptations n√©cessaires et les am√©liorations technologiques envisageables.</p>
            </section>

            <div class="main-content">
                <aside class="sidebar">
                    <h3>üìë Navigation</h3>
                    <ul>
                        <li><a href="#integration-role">R√¥le Global</a></li>
                        <li><a href="#integration-data">Donn√©es Collect√©es</a></li>
                        <li><a href="#adaptations">Adaptations</a></li>
                        <li><a href="#improvements">Am√©liorations</a></li>
                        <li><a href="#architecture">Architecture Modulaire</a></li>
                        <li><a href="#roadmap">Feuille de route</a></li>
                    </ul>
                </aside>

                <div class="content">
                    <section id="integration-role">
                        <h2>üîó R√¥le dans l'√©cosyst√®me Home Trainer</h2>
                        <p>Notre montage repr√©sente une <strong>dimension essentielle</strong>, fournissant une vision compl√®te et multimodale de l'√©tat de l'utilisateur en temps r√©el.</p>

                        <div class="box-highlight">
                            <h3>üéØ Objectifs principaux</h3>
                            <ul>
                                <li><strong>Suivi physiologique continu :</strong> Fr√©quence cardiaque, SpO‚ÇÇ, temp√©rature et stress</li>
                                <li><strong>Analyse environnementale :</strong> Qualit√© de l'air, d√©tection de mouvements et contexte</li>
                                <li><strong>Alertes en temps r√©el :</strong> Retours visuels et sonores pour pr√©venir les risques</li>
                                <li><strong>Feedback utilisateur :</strong> Dashboards interactifs pour l'engagement et la conscience</li>
                            </ul>
                        </div>
                    </section>

                    <section id="integration-data">
                        <h2>üìä Donn√©es collect√©es et applications</h2>
                        <table>
                            <thead><tr><th>Donn√©e</th><th>Capteur</th><th>Signification</th><th>Application Home Trainer</th></tr></thead>
                            <tbody>
                                <tr><td><strong>Stress physiologique</strong></td><td>GSR</td><td>Activation sympathique SNS</td><td>Adapter la difficult√© du parcours</td></tr>
                                <tr><td><strong>Effort cardiaque</strong></td><td>SpO‚ÇÇ + BPM</td><td>Oxyg√©nation & fr√©quence</td><td>Moduler r√©sistance du v√©lo</td></tr>
                                <tr><td><strong>Posture & Mouvements</strong></td><td>MPU6050 + PIR</td><td>Stabilit√© ergonomique</td><td>D√©clencher rappels posturaux</td></tr>
                                <tr><td><strong>Qualit√© de l'air</strong></td><td>CCS811</td><td>Hygi√®ne ambiante</td><td>Afficher indice qualit√©</td></tr>
                            </tbody>
                        </table>
                    </section>

                    <section id="adaptations">
                        <h2>‚öôÔ∏è Adaptations n√©cessaires pour int√©gration optimale</h2>
                        <div class="timeline">
                            <div class="timeline-item">
                                <h4>üîÑ Synchronisation avec autres modules</h4>
                                <p>Les donn√©es doivent √™tre synchronis√©es avec le module d'entra√Ænement (r√©sistance, parcours interactifs). Par exemple: √©l√©vation GSR ‚Üí sc√©nario motivant ou r√©duction de difficult√©.</p>
                            </div>

                            <div class="timeline-item">
                                <h4>üìä Harmonisation des formats de donn√©es</h4>
                                <p>Standardiser tous les formats JSON et topics MQTT pour int√©gration fluide. Utiliser un sch√©ma commun: timestamps, IDs utilisateurs, metadata.</p>
                            </div>

                            <div class="timeline-item">
                                <h4>üéØ Optimisation de l'ergonomie physique</h4>
                                <p>Revoir la disposition des capteurs pour garantir confort prolong√©. Les capteurs doivent √™tre discrets, stables et non intrusifs.</p>
                            </div>

                            <div class="timeline-item">
                                <h4>üîê Gestion des profils utilisateurs</h4>
                                <p>Int√©grer le monitoring aux profils pour suivi historique, personnalisation des seuils d'alerte et sauvegarde des donn√©es de session.</p>
                            </div>

                            <div class="timeline-item">
                                <h4>üì± Interface utilisateur unifi√©e</h4>
                                <p>Cr√©er une dashboard centralis√©e affichant monitoring, progression du parcours et scores code de la route.</p>
                            </div>
                        </div>
                    </section>

                    <section id="improvements">
                        <h2>üöÄ Am√©liorations futures et √©volution</h2>

                        <h3 id="architecture">Architecture modulaire propos√©e</h3>
                        <p>Scinder le projet en <strong>deux modules distincts</strong> pour am√©liorer maintenabilit√© et scalabilit√© :</p>

                        <div class="cards-grid">
                            <div class="card">
                                <h4>üìç Module Environnemental</h4>
                                <p><strong>Capteurs :</strong> CCS811, MPU6050, PIR</p>
                                <p><strong>Donn√©es :</strong> CO‚ÇÇ, TVOC, mouvements</p>
                                <p><strong>Objectif :</strong> Analyse contextuelle</p>
                                <p><strong>B√©n√©fice :</strong> Adaptable √† d'autres projets IoT</p>
                            </div>
                            <div class="card">
                                <h4>‚ù§Ô∏è Module Physiologique</h4>
                                <p><strong>Capteurs :</strong> GSR, SpO‚ÇÇ, BPM, temp√©rature</p>
                                <p><strong>Donn√©es :</strong> Sant√© vitale, stress, effort</p>
                                <p><strong>Objectif :</strong> Suivi m√©dical haute pr√©cision</p>
                                <p><strong>B√©n√©fice :</strong> Sp√©cialisation pour la sant√©</p>
                            </div>
                        </div>

                        <h3>Am√©liorations technologiques envisageables</h3>
                        <div class="spec-list">
                            <div class="spec-item"><strong>ü§ñ Machine Learning</strong><br>Algorithmes de classification pour patterns stress et anomalies</div>
                            <div class="spec-item"><strong>‚òÅÔ∏è Cloud & Stockage</strong><br>Architecture cloud (AWS, Azure, Firebase) pour donn√©es historiques</div>
                            <div class="spec-item"><strong>üì± Application Mobile</strong><br>App native pour visualisation remote et notifications push</div>
                            <div class="spec-item"><strong>üîê S√©curit√© & Privacy</strong><br>Chiffrement, authentification multi-factor, conformit√© RGPD</div>
                            <div class="spec-item"><strong>‚ö° Optimisation Hardware</strong><br>Capteurs plus pr√©cis, PCB custom, alimentation optimis√©e</div>
                            <div class="spec-item"><strong>üß† IA Pr√©dictive</strong><br>Pr√©dictions performances et recommandations d'entra√Ænement</div>
                        </div>

                        <h3 id="roadmap">Feuille de route (Roadmap)</h3>
                        <div class="box-highlight">
                            <table>
                                <thead>
                                    <tr><th>Phase</th><th>Timeline</th><th>Objectifs</th><th>Livrables</th></tr>
                                </thead>
                                <tbody>
                                    <tr><td><strong>Phase 1</strong></td><td>Aujourd'hui</td><td>Prototype fonctionnel & tests</td><td>Code, Wiki, Dashboards</td></tr>
                                    <tr><td><strong>Phase 2</strong></td><td>Q1 2025</td><td>Modularisation & s√©paration</td><td>Modules ind√©pendants</td></tr>
                                    <tr><td><strong>Phase 3</strong></td><td>Q2 2025</td><td>Int√©gration Home Trainer</td><td>Syst√®me global unifi√©</td></tr>
                                    <tr><td><strong>Phase 4</strong></td><td>Q3 2025</td><td>ML & Cloud</td><td>Pr√©dictions & scalabilit√©</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>


    <footer>
        <p><strong>Home Trainer - Syst√®me de Monitoring Sant√© Connect√©</strong></p>
        <p>Wiki Compl√®te & Professionnelle | Arduino UNO R4 WiFi + MQTT + Node-RED</p>
        <p style="margin-top: 1rem; color: #bbb;">¬© 2024 Home Trainer Project</p>
    </footer>

    <script>
        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.page-tab').forEach(t => t.classList.remove('active'));
           
            document.getElementById(pageId).classList.add('active');
            event.target.classList.add('active');
           
            window.scrollTo(0, 0);
        }
    </script>
</body>
</html>